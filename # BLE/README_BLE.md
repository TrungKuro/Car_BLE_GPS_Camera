# Bluetooth là gì?

> **Bluetooth** được phát minh bởi **công ty Ericsson** vào năm **1994**, là chuẩn kết nối *"không dây tầm ngắn"*, thiết kế cho các kết nối thiết bị cá nhân, trong phạm vi **băng tần 2,4GHz**.
>
> Tuy sử dụng cùng tần số với công nghệ **Wifi** nhưng chúng không hề xung đột với nhau vì Bluetooth sử dụng *"tần số có bước sóng ngắn hơn"*.
>
> Bluetooth là một *"chuẩn điện tử"*, điều đó có nghĩa là các hãng sản xuất muốn có đặc tính này trong sản phẩm thì họ phải tuân theo các yêu cầu chuẩn của Bluetooth cho sản phẩm của mình. Những chỉ tiêu kỹ thuật này bảo đảm cho các thiết bị có thể nhận ra và tương tác với nhau khi sử dụng công nghệ Bluetooth.

### Sơ lược quá trình phát triển của Bluetooth

> Đầu tiên, về tên gọi của công nghệ không dây này thì nó được đặt theo tên của một vị vua Đan Mạch có tên là **Harald Bluetooth** – là vị vua nổi tiếng về khả năng thương lượng và giao tiếp với mọi người.
>
> Bluetooth được phát triển đầu tiên bởi *"một kỹ sư điện tử của Ericsson vào năm 1994"*.
>
> Sau đó, nó được chuẩn hóa bởi **Bluetooth Special Interest Group (SIG)** – là một tổ chức được thành lập bởi các hãng sản xuất điện tử nổi tiếng: gồm Ericcson, IBM, Intel, Nokia, Toshiba và sau này có sự tham gia của Microsoft, Lenovo và Apple.
> - Chức năng của tổ chức là giám sát việc phát triển các tiêu chuẩn Bluetooth và cấp phép cho các nhà sản xuất công nghệ không dây này.
> - Công nghệ Bluetooth chính thức được chuẩn hóa rồi được *"công bố rộng rãi vào ngày 20/5/1999"* và nhanh chóng trở nên phổ biến chỉ sau vài năm.

### Ưu và nhược điểm của công nghệ Bluetooth

> **Ưu điểm:**
> - Thay thế hoàn toàn dây nối.
> - Hoàn toàn không nguy hại đến sức khoẻ con người.
> - Bảo mật an toàn với công nghệ mã hóa trong. Một khi kết nối được thiết lập thì khó có một thiết bị nào có thể nghe trộm hoặc lấy cắp dữ liệu.
> - Các thiết bị có thể kết nối với nhau trong vòng **20m** mà không cần trực diện (hiện nay có loại Bluetooth kết nối lên đến **100m**).
> - Giá thành rẻ.
> - Tốn ít năng lượng, ở chế độ chờ tốn **~0.3mA**h, tối đa **~30mAh** trong chế độ truyền dữ liệu.
> - Không gây nhiễu các thiết bị không dây khác.
> - Tính tương thích cao nên được nhiều nhà sản xuất phần cứng và phần mềm hỗ trợ.
>
> **Nhược điểm:**
> - Tốc độ thấp, khoảng **720.000 bps** tối đa.
> - Bắt sóng kém khi có vật cản.
> - Thời gian thiết lập lâu.
>
> @ Để đảm bảo an toàn bảo mật cho thiết bị Bluetooth. Người dùng nên giữ thiết bị ở *"chế độ Hidden"*.

### Nguồn tài liệu:

> - [Bluetooth](https://vi.wikipedia.org/wiki/Bluetooth)
> - [How does Bluetooth Work?](https://www.youtube.com/watch?v=1I1vxu5qIUM&t=1032s&ab_channel=BranchEducation)
> - [Different Bluetooth Versions: What You Need to Know](https://www.headphonesty.com/2021/01/bluetooth-versions/)

# Mọi thứ về công nghệ Bluetooth
### Nguyên lý hoạt động của Bluetooth

> Khi kết nối, Bluetooth sẽ *"tự động tìm ra tần số tương thích"* để di chuyển đến thiết bị cần kết nối trong khu vực nhằm đảm bảo sự ổn định trong quá trình kết nối giữa các thiết bị với nhau.

### Tầm phủ sóng

> Về tầm phủ sóng, Bluetooth có **3 class** khác nhau:
> - Class 1: công suất **100mW** với tầm phủ sóng gần **100m**.
> - Class 2: công suất **2,5mW** với tầm phủ sóng khoảng **10m**.
> - Class 3: công suất **1mW** với tầm phủ sóng khoảng **5m**.
>
> @ Và bản thân trong Bluetooth là tập hợp của nhiều *"giao thức"* khác nhau.

### Các chuẩn kết nối Bluetooth

> **@ Lưu ý:** tất cả các phiên bản Bluetooth đều *"tương thích ngược"* và có thể hoạt động với các giao thức Bluetooth thấp hơn.

#### `Bluetooth 1.0-1.2 (1999)`

> Bluetooth được thiết kế để thay thế cổng nối tiếp máy tính **RS-232**. Công dụng chính của nó là kết nối các thiết bị ngoại vi của PC như modem và máy in.
>
> Trong vài năm tới, Bluetooth **1.2** đã được tích hợp vào các thiết bị như tai nghe rảnh tay, điện thoại di động và máy tính xách tay.
>
> **Đặc điểm chính:**
> - Bluetooth **1.0a** và **1.0b** có tốc độ truyền dữ liệu tối đa khoảng *732,2 kb/s*, với phạm vi kết nối là *10m hoặc 33ft*.
> - Phiên bản **1.2** đã cải thiện điều này bằng cách tăng tốc độ truyền dữ liệu lên tới *1 Mbps*.
>
> **Các cải tiến khác bao gồm:**
> - Khả năng phát hiện và ghép nối thiết bị nhanh hơn.
> - Triển khai *"kết nối đồng bộ mở rộng"* - **(eSCO) Extended Synchronous Connections** để cải thiện chất lượng âm thanh.
>
> **Nhược điểm:**
> - Bất chấp những cải tiến, Bluetooth **1.2** không có đủ băng thông để truyền âm thanh chất lượng cao.
> - Nó cũng có vấn đề về bảo mật và dễ bị tiêu thụ điện năng cao.
>
> ---
>
> **[Bluetooth 1.0]**: Phiên bản Bluetooth đầu tiên với tốc độ 1Mpbs, nhưng khả năng tương thích chưa cao.
>
> **[Bluetooth 1.1]**: Phiên bản cải thiện lỗi của 1.0 nhưng không cải thiện tốc độ.
>
> **[Bluetooth 1.2]**: Bản nâng cấp của Bluetooth 1.0 với sự cải tiến về tốc độ kết nối, truyền tải.
>
> **[Bluetooth 1.2 + ERD]**: Tốc độ của chuẩn Bluetooth lên đến 2.1 Mbps với chế độ cải thiện kết nối truyền tải – ERD (Enhanced Data Rate).

#### `Bluetooth 2.0-2.1 (2005)`

> Sự xuất hiện của **Bluetooth 2** đánh dấu một giai đoạn tăng trưởng đáng kể.
>
> Tại thời điểm này, công nghệ Bluetooth đã trở thành một tiêu chuẩn trong nhiều sản phẩm tiêu dùng hơn và là một tính năng phổ biến trong cuộc sống hàng ngày của mọi người. 
>
> **Đặc điểm chính:**
> - Cải tiến đáng chú ý nhất trong phiên bản **2.0** là *"tốc độ dữ liệu nâng cao"* - **EDR (Enhanced Data Rate)** . Điều này làm tăng tốc độ truyền dữ liệu lên tới *2,1 Mb/s*.
>
> **Các cải tiến khác bao gồm:**
> - Phạm vi kết nối tăng lên *30m hoặc 100ft*.
> - Mức tiêu thụ điện năng thấp hơn **Bluetooth 1** và thời lượng pin dài hơn cho các thiết bị không dây.
> - Cải thiện bảo mật với hệ thống ghép nối mới được gọi là *"ghép nối đơn giản an toàn"* - **SSP (Secure Simple Pairing)**.
>
> **Nhược điểm:**
> - **SBC** là *"codec"* tiêu chuẩn duy nhất được các thiết bị sử dụng vào thời điểm đó. Vì vậy, chất lượng âm thanh trong các thiết bị **Bluetooth 2** vẫn ở mức trung bình.
> - Được biết đến với khả năng nén tệp kỹ thuật số dưới mức trung bình, **SBC** mang lại chất lượng âm thanh kém và dễ bị trễ âm thanh.
>
> ---
>
> **[Bluetooth 2.0 + ERD]**: Ra mắt vào tháng 7/2007 với sự ổng định và tốc độ chia sẻ nhanh hơn, tiết kiệm năng lượng hơn các phiên bản trước.
>
> **[Bluetooth 2.1 + ERD]**: Bản nâng cấp của Bluetooth 2.0 với cơ chế kết nối phạm vi nhỏ.

#### `Bluetooth 3.0 (2009)`

> **Bluetooth 3 + HS (High Speed)** sử dụng sức mạnh của **Wi-Fi**, cho phép tốc độ truyền nhanh hơn. Như vậy, nó có thể truyền lượng dữ liệu âm thanh và video lớn hơn.
>
> Do đó làm cho nó trở thành phiên bản Bluetooth phổ biến nhất cho tai nghe, loa và trình phát phương tiện di động.
>
> **Đặc điểm chính:**
> - Một trong những thay đổi quan trọng nhất trong **Bluetooth 3** là khả năng *"truyền dữ liệu qua Wi-Fi"*. Và nó đã làm được điều này ở tốc độ *từ 800 Kb/s đến 24 Mb/s*.
>
> **Các cải tiến khác bao gồm:**
> - Các chế độ nâng cao **L2CAP** và thay thế **MAC** & **PHY** để truyền các tệp kỹ thuật số lớn.
> - *"Kiểm soát năng lượng nâng cao"* - **(EPC) Enhanced Power Control** cho phép các thiết bị không dây điều chỉnh mức năng lượng khi cần. Điều này giúp duy trì kết nối Bluetooth tốt.
> - Dữ liệu không kết nối **Unicast** tạo điều kiện chuyển nhanh các lượng dữ liệu nhỏ hơn.
>
> **Nhược điểm:**
> - Nhược điểm của **Bluetooth 3** là mức tiêu thụ điện năng cao. Nó nhanh chóng làm cạn kiệt pin của các thiết bị hỗ trợ Bluetooth.
>
> ---
>
> **[Bluetooth 3.0 + HS]**: Ra mắt vào năm 2009 với tốc độ lý thuyết lên đến 24 Mbps. Những thiết bị hỗ trợ Bluetooth 3.0 nhưng không có HS (High Speed) sẽ không đạt được tốc độ trên.

#### `Bluetooth 4.0-4.2 (2010)`

> Bluetooth 4 mang đến **Bluetooth Low Energy (BLE)** hoặc **Bluetooth Smart**.
>
> Nó giúp cung cấp năng lượng cho các thiết bị nhỏ hơn, như máy theo dõi thể dục, máy trợ thính và tai nghe, cho phép chúng duy trì kết nối lâu hơn mà sử dụng ít năng lượng hơn.
>
> Tuy nhiên, **BLE** đã giảm tốc độ truyền dữ liệu xuống chỉ còn tối đa *1 Mb/s*.
>
> **Bluetooth Smart Ready** biến các thiết bị chính như máy tính xách tay, máy tính bảng và điện thoại thông minh thành trung tâm kết nối. Điều này cho phép họ gửi và nhận dữ liệu từ các thiết bị **Smart**.
>
> **Đặc điểm chính:**
> - **Bluetooth 4** được cải thiện nhiều hơn so với mức tiêu thụ năng lượng của nó.
> - Sự ra đời của *"codec"* **aptX** cũng tăng cường truyền dữ liệu âm thanh. Điều này là do tốc độ bit cao hơn và thuật toán nén mất dữ liệu hiệu quả.
>
> **Các cải tiến khác bao gồm:**
> - Tăng phạm vi kết nối lên *60m hoặc 200ft*.
> - Ít nhiễu hơn giữa tín hiệu Bluetooth và **4G/LTE**.
> - Cải thiện ghép nối và ghép nối lại thiết bị.
> - Tăng dung lượng gói và phạm vi dữ liệu cho các thiết bị **IoT**.
> - Cải thiện truyền dữ liệu với *"nhảy tần thích ứng"* - **AFH (Adaptive Frequency Hopping)**.
>
> **Nhược điểm:**
> - Các thiết bị **Smart Ready** có thể dễ dàng ghép nối với các thiết bị sử dụng kiểu Bluetooth cũ hơn. Nhưng chúng được ghép nối tốt nhất với các thiết bị **Smart Ready** khác.
>
> ---
>
> **[Bluetooth 4.0]**: Ra mắt tháng 6/2010, là một phiên bản tối ưu hóa các chuẩn Bluetooth trước đó (Classic Bluetooth) cho phép truyền tải tốc độ cao nhờ vào Bluetooth High Speed và tiêu tốn năng lượng thấp hơn nhờ vào Bluetooth Low Energy.
>
> **[Bluetooth 4.1]**: Năm 2014, Bluetooth nâng cấp lên bản 4.1 cải thiện tình trạng chồng chéo dữ liệu của Bluetooth với mạng 4G. Giúp tối đa hóa hiệu năng nhờ tự điều chỉnh băng thông, đồng thời tiết kiệm năng lượng hơn nhờ tối ưu thời gian chờ kết nối lại.
>
> **[Bluetooth 4.2]**: Là một bản nâng cấp nữa trong năm 2014, cải thiện tốc độ truyền tải lên đến 2.5 lần so với bản 4.1, tiết kiệm năng lượng hơn, hạn chế lỗi kết nối cũng như bảo mật tốt. Đồng thời tính năng quan trọng nhất là hỗ trợ chia sẻ kết nối mạng Internet theo giao thức IPv6.

#### `Bluetooth 5.0-5.3 (2016- present)`

> Phiên bản Bluetooth mới nhất, **Bluetooth 5**, được phát hành vào tháng 7 năm 2016. Nhiều cải tiến của phiên bản này tập trung vào việc cung cấp khung hoạt động tốt hơn cho các thiết bị **IoT**.
>
> **Đặc điểm chính:**
> - **Bluetooth 5** cung cấp các tốc độ dữ liệu khác nhau tùy thuộc vào phạm vi, *từ 125 Kb/s đến 2 Mb/s*, tất cả trong khi vẫn kết hợp **BLE**.
> - Nó cũng mở rộng phạm vi kết nối lên đến *240m*. Hơn nữa, phiên bản **5.2** cũng đi kèm với *"bộ giải mã giao tiếp có độ phức tạp thấp"* - **(LC3) Low Complexity Communication Codec**.
> - Bộ giải mã mới này truyền dữ liệu âm thanh ở tốc độ bit thấp hơn mà không làm giảm chất lượng âm thanh.
>
> **Các cải tiến khác bao gồm:**
> - Tiêu thụ điện năng ít hơn.
> - Tăng dung lượng tin nhắn.
> - Tương thích ngược với các phiên bản **Bluetooth 4**.
> - Tính năng **Dual Audio** cho phép bạn kết nối với hai thiết bị khác nhau cùng một lúc.
> - Bổ sung **(SAM) - Slot Availability Mask**, giúp giảm bớt nhiễu hơn nữa với **LTE**.
>
> **Nhược điểm:**
> - Tốc độ truyền dữ liệu và phạm vi hoạt động lần lượt tăng gấp đôi và gấp bốn lần. Điều này cho phép hack các thiết bị từ khoảng cách xa hơn và tải xuống nhiều dữ liệu hơn trong một khoảng thời gian ngắn hơn. Điều này rất rủi ro vì **Bluetooth 5** chỉ sử dụng *"xác thực thiết bị"* chứ không phải *"xác thực người dùng"*.
>
> ---
>
> **[Bluetooth 5.0]**: Là thế hệ mới nhất hiện tại được SIG trình làng vào ngày 16/6/2016 với nhiều cải tiến vượt bật như tầm phủ sóng rộng gấp 4 lần, tốc độ nhanh hơn gấp đôi và tiết kiệm điện hơn gấp 2,5 lần so với 4.0.
>
> **[Bluetooth 5.1]**: Nâng cấp thêm khả năng tìm hướng AoA (Angle of Arrival) và AoD (Angle of Departure) giúp xác định vị trí chính xác của thiết bị. Ngoài ra Bluetooth 5.1 còn trang bị khả năng kết nối không cần gói dữ liệu giúp kết nối, đồng bộ đơn giản và ít điện năng hơn.
>
> **[Bluetooth 5.2]**: Được ra mắt năm 2020 với tính năng giao thức thuộc tính nâng cao (EATT) giúp giảm độ trễ và tăng mã hóa trong kết nối. Tính năng kiểm soát LEPC để kiểm soát nguồn và ổn định chất lượng tín hiệu, giảm tỉ lệ lỗi nhận tín hiệu. Và tính năng ISOC cho phép truyền dữ liệu hai chiều với cùng lúc nhiều thiết bị.

### Một số cấu hình thông tin mà Bluetooth hỗ trợ

> Sau đây là một số cấu hình thông tin, hay còn gọi là **Bluetooth Profiles**, đóng vai trò như bộ *"giải mã (codec)"* giữa Bluetooth và thiết bị đầu cuối:
>
> - **HSP - Headset Profile**: Dùng để nhận diện và truyền tín hiệu từ micrô và âm thanh đơn 64 kps.
> - **HFP - Handsfree Profile**: Tương tự như **HSP** nhưng hỗ trợ âm thanh stereo (âm thanh hai kênh).
> - **A2DP - Advanced Audio Distribution Profiles**: Truyền tải tín hiệu stereo với chất lượng và độ trễ thấp, tương đương tại nghe có dây.
> - **AVRCP - Audio/Video Remote Control**: Dùng để truyền tải các lệnh điều khiển như dừng, phát nhạc, tăng giảm âm lượng từ thiết bị điều khiển.
> - **PBAB - Phone Book Access Profile**: Cho phép tai nghe truy cập danh bạ điện thoại của người dùng cho tính năng thông báo người gọi.
>
> Ngoài ra, còn có các tiêu chuẩn âm thanh không dây khác để cải thiện chất lượng bluetooth như aptX, LDAC,...

---

## Bluetooth Low Energy ([BLE](https://www.thegioididong.com/hoi-dap/bluetooth-low-energy-ble-la-gi-nhung-dieu-ban-chua-biet-ve-1322460))

> Bluetooth năng lượng thấp - là một công nghệ mạng không dây tiêu thụ rất ít năng lượng dùng để kết nối các thiết bị với nhau.
>
> Ban đầu công nghệ này được phát minh *"bởi Nokia vào năm 2006"* với tên gọi **Wibree**.
>
> Trước khi được **Bluetooth Special Interest Group (Bluetooth SIG)** *"tích hợp vào Bluetooth 4.0 có tên **BLE** vào năm 2010"*.
>
> Mục tiêu chính của việc tích hợp là tối ưu hóa mức năng lượng tiêu thụ.
>
> **@ Lưu ý:** BLE không được xem là bản nâng cấp của Bluetooth thông thường. Mà nó là một công nghệ mới tập trung vào **IoT** - những thiết bị có ít dữ liệu được truyền đi ở tốc độ thấp.

### Điểm khác biệt "Classic Bluetooth" và "Bluetooth BLE"

> - Bluetooth thông thường thích hợp để xử lý, truyền và trao đổi một lượng lớn dữ liệu (ví dụ như trong âm thanh, video). Tuy nhiên, nó sẽ tiêu tốn nhiều điện năng hơn và có giá thành đắt hơn.
> - Công nghệ BLE phù hợp với các ứng dụng không yêu cầu chuyển một lượng lớn dữ liệu, do đó có thể chỉ khôi phục một số ít thông tin dữ liệu. Và cũng nhờ thế mà thiết bị có thể chạy bằng năng lượng pin trong nhiều năm với chi phí thấp hơn Bluetooth vì nó không yêu cầu kết nối liên tục.

### Các kiểu thiết bị của BLE

> Thiết bị BLE gồm **2 loại** là...
> - **Bluetooth Smart (Single mode**):
>   - Chỉ có thể giao tiếp với thiết bị Bluetooth Smart hoặc Bluetooth Smart Ready.
> - **Bluetooth Smart Ready (Dual mode)**:
>   - Có thể giao tiếp được các loại thiết bị Bluetooth như Bluetooth Smart, Bluetooth Smart Ready và Classic Bluetooth.
>   - Những thiết bị kết nối trung tâm như laptop, smartphone, tablet sử dụng chip kiểu Bluetooth Smart Ready (Dual mode).

### Ưu và nhược điểm của BLE

> **Ưu điểm:**
> - Đầu tiên phải nói đến khả năng tiêu thụ năng lượng đến mức tối thiểu, cho phép thiết bị hoạt động trong vài tháng hoặc vài năm chỉ với một viên pin đồng xu nhờ vào cơ chế bật khi có dữ liệu đến/đi và tắt khi không có dữ liệu một cách liên tục.
> - Những mô hình dữ liệu và chip được dùng để thiết kế Bluetooth LE có giá thành không quá cao và phức tạp vì thế công nghệ này cũng có mức giá tương đối thấp.
> - BLE hoạt động ở *"tần số 2,4 Ghz **ISM** band"*, giúp tránh nhiễu sóng giữa các thiết bị WiFi và Bluetooth.
> - Thủ tục thiết lập kết nối và truyền dữ liệu rất nhanh (khoảng 3 ms).
> - Quan trọng nhất chính là sự tích hợp của công nghệ BLE trong hầu hết các điện thoại thông minh được bán trong thị trường hiện nay mang đến nhiều lợi thế hơn những công nghệ khác.
>
> **Nhược điểm:**
> - Thông lượng dữ liệu nhỏ:
>   - Tần số điều chế của sóng BLE trong không gian là 1Mbps. Đây là giới hạn trên của thông lượng theo lý thuyết.
>   - Tuy nhiên trong thực tế tham số này nhỏ hơn do ảnh hưởng của nhiều yếu tố.
> - Khoảng cách bị giới hạn:
>   - Theo lý thuyết, BLE có khả năng truyền dữ liệu với khoảng cách tối đa 100m.
>   - Tuy nhiên, trên thực tế, công nghệ này chỉ truyền được với khoảng cách 30m và đạt hiệu quả cao ở mức 2-5m.
